<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Sigil</title>
<link rel="stylesheet"
	href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
<link rel="stylesheet"
	href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css">
<!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
<link rel="stylesheet" href="dropzone.css">
<link rel="stylesheet" href="sigil.css">
</head>
<body>

	<!-- Error popup -->
	<div class="modal fade" id="error_popup" tabindex="-1" role="dialog"
		aria-labelledby="error_popup">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal"
						aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
					<h4 class="modal-title" id="myModalLabel">An error occured</h4>
				</div>
				<div class="modal-body">
					<span data-bind="text: error_message"></span>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-default" data-dismiss="modal">Ok</button>
				</div>
			</div>
		</div>
	</div>

	<!-- Login Form -->
	<div class="modal fade" id="login_modal" tabindex="-1">
		<div class="modal-dialog">
			<div class="modal-content">
				<form class="form-signin " id="form-signin">
					<div class="modal-header clearfix">
						<img src="sigil.png" class="img-rounded pull-right" width="100px">
						<h2 class="form-signin-heading">Please sign in</h2>
						<div class="alert alert-danger"
							data-bind="visible: login_error_message">
							<span data-bind="text: login_error_message"></span>
						</div>
					</div>
					<div class="modal-body">
						<div class="form-group">
							<label for="username" class="control-label">Username</label> <input
								type="text" name="username" class="form-control"
								placeholder="Username" required autofocus
								data-bind="value: current_user.username">
						</div>
						<div class="form-group">
							<label for="password" class="control-label">Password</label> <input
								type="password" name="password" class="form-control"
								placeholder="Password" required
								data-bind="value: current_user.password">
						</div>
						<div class="form-group"
							data-bind="visible: server_options.use_totp()">
							<label for="totp" class="control-label">PIN code</label> <input
								type="text" name="totp" class="form-control" placeholder="PIN"
								required data-bind="value: current_user.totp">
						</div>

					</div>
					<div class="modal-footer">
						<a href="recover.html">Recover password ?</a>
						<button type="submit" class="btn btn-primary"
							data-bind="click: $root.login">Sign In</button>
					</div>
				</form>
			</div>
		</div>
	</div>

	<!-- Application Page -->
	<nav class="navbar navbar-inverse navbar-fixed-top">
		<div class="container-fluid">
			<div class="navbar-header">
				<button type="button" class="navbar-toggle collapsed"
					data-toggle="collapse" data-target="#navbar" aria-expanded="false"
					aria-controls="navbar">
					<span class="sr-only">Toggle navigation</span> <span
						class="icon-bar"></span> <span class="icon-bar"></span> <span
						class="icon-bar"></span>
				</button>
				<a class="navbar-brand" href="#"> <img src="sigil.png"
					class="brand-img"></a>
			</div>
			<div id="navbar" class="navbar-collapse collapse">
				<ul class="nav navbar-nav navbar-right">
					<li class="dropdown"><a href="#" data-toggle="dropdown"
						role="button"> Signed in as <span
							data-bind="text: current_user.display_name()"></span> <span
							class="caret"></span></a>
						<ul class="dropdown-menu">
							<li><a href="#">Edit personal details</a></li>
							<li><a href="#">Change password</a></li>
							<li><a href="#">Add 2FA device</a></li>
							<li role="separator" class="divider"></li>
							<li><a href="#" data-bind="click: $root.logout">Logout</a></li>
						</ul></li>
				</ul>
				<form class="navbar-form navbar-right"
					data-bind="visible: current_tab().searchable">
					<input type="text" class="form-control" placeholder="Search...">
				</form>
			</div>
		</div>
	</nav>

	<div class="container-fluid">
		<div class="row">
			<div class="col-sm-3 col-md-2 sidebar">
				<ul class="nav nav-sidebar" data-bind="foreach: tabs">
					<li data-bind="css: { active: $parent.current_tab().key == key }">
						<a href="#"
						data-bind="text: label, click: $parent.set_current_tab"></a>
					</li>
				</ul>
			</div>
			<div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main">
				<h1 class="page-header">
					<span data-bind="text: current_tab().label"></span> <a href="#"
						class="btn btn-sm btn-success"
						data-bind="visible: current_tab().can_add">Add <span
						class=" glyphicon glyphicon-plus"></span>
					</a>
				</h1>


				<!-- Data view -->
				<div class="container"
					data-bind="visible: data_view.collection, with: data_view">
					<table class="table table-hover">
						<thead>
							<tr data-bind="foreach: headers">
								<th data-bind="text: name, click:$parent.sortby(key)"></th>
							</tr>
						</thead>
						<tbody data-bind="foreach: {data: get_data, as: 'line'}">
							<tr data-bind="foreach: $parent.columns">
								<td data-bind="text: line[key]"></td>
							</tr>
						</tbody>
					</table>
				</div>

				<!-- Excel import view -->
				<div class="container" 
					data-bind="visible: current_tab().key == 'import'">
					<form action="/file-upload" class="drop dropzone"
						id="import-file-dropzone"></form>
				</div>
			</div>
		</div>
	</div>



	<!-- JS imports -->
	<script
		src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
	<script
		src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
	<script
		src="https://cdnjs.cloudflare.com/ajax/libs/knockout/3.3.0/knockout-min.js"></script>
	<script src="js.cookie-2.0.3.min.js"></script>
	<script src="sammy.min.js"></script>
	<script src="dropzone.js"></script>
	<script src="sigil.js"></script>
</body>
</html>